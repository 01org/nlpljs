<!--
scrolling image search results component

wraps an cp-layout with an infini-scroll component, and propagates
any "morecontent" and "replacecontent" events from the infini-scroll
upwards
-->
<link rel="import" href="./infini-scroll.html">
<link rel="import" href="./cp-layout.html">

<polymer-element name="image-results">
  <template>
    <style>
      :host {
        display: block;
      }

      infini-scroll {
        width: 100%;
        height: 100%;
      }
    </style>

    <infini-scroll id="scroller" on-morecontent="{{fireMoreImages}}"
                   on-replacecontent="{{fireReplaceImages}}">
      <cp-layout id="layout"></cp-layout>
    </infini-scroll>
  </template>

  <script>
    (function () {
      Polymer({
        /*
        load more results already returned by searches when
        the scroller reaches the bottom
        */
        fireMoreImages: function () {
          this.fire('moreimages');
        },

        // replace current content with new search results
        fireReplaceImages: function () {
          this.$.layout.clear();
          this.fire('replaceimages');
        },

        // append an image into the wrapped cp-layout
        appendImage: function (image, keyword) {
          this.$.layout.appendImage(image, keyword);
        },

        // layout the wrapped cp-layout
        layout: function () {
          this.$.layout.layout();
        }
      });
    })();
  </script>
</polymer-element>
